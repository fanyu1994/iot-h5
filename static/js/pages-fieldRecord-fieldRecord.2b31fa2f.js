(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-fieldRecord-fieldRecord"],{"1e18":function(t,e,a){var n=a("6f9f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("7a73bfb8",n,!0,{sourceMap:!1,shadowMode:!1})},"4a85":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sendWebsocket=f,e.closeWebsocket=h;var n=null,i=null,o=null,s="";function c(t){i(JSON.parse(t.data))}function r(t){var e=this;setTimeout((function(){n.readyState===n.OPEN&&n.send(JSON.stringify(t)),n.readyState===n.CLOSED&&(console.log("websock.readyState=3"),e.$tip.error("ws连接异常，请稍候重试"),o())}),500)}function l(t){t&&1e3!==t.code&&(this.$tip.error("ws连接异常，请稍候重试"),o())}function d(t){}function u(){if("undefined"===typeof WebSocket)return this.$tip.error("您的浏览器不支持WebSocket，无法获取数据"),!1;n=new WebSocket(s),n.onmessage=function(t){c(t)},n.onopen=function(){d()},n.onerror=function(){this.$tip.error("ws连接异常，请稍候重试"),o()},n.onclose=function(t){l(t)}}function f(t,e,a,n){s=t,u(),i=a,o=n,r(e)}function h(){n&&(n.close(),n.onclose())}},"641e":function(t,e,a){"use strict";var n=a("1e18"),i=a.n(n);i.a},"6f9f":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".field-record[data-v-57324b87]{padding-top:%?88?%}.field-record .cx-sc-title[data-v-57324b87]{position:fixed;left:0;top:0;z-index:100;width:100%;height:%?88?%;line-height:%?88?%;background-color:#fff;overflow:hidden;font-size:%?32?%;font-family:PingFangSC-Semibold,PingFang SC;font-weight:600;color:#000}.field-record .add[data-v-57324b87]{height:%?200?%;background:#fff;border-radius:%?16?%;margin:%?20?% %?24?%;text-align:center;line-height:%?200?%;font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#323233}.field-record .content[data-v-57324b87]{background:#fff;border-radius:%?16?%;margin:0 %?24?%;padding:0 %?24?%}.field-record .content .content-item[data-v-57324b87]{padding:%?32?% 0;height:%?152?%;box-sizing:border-box;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:%?2?% solid #e6e6e6}.field-record .content .content-item[data-v-57324b87]:nth-last-child(1){border-bottom:none}.field-record .content .content-item .item-left[data-v-57324b87]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.field-record .content .content-item .item-left .left-title[data-v-57324b87]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#323233}.field-record .content .content-item .item-left .left-desc[data-v-57324b87]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#969799;margin-top:%?8?%}.field-record .content .content-item .item-right[data-v-57324b87]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.field-record .content .content-item .item-right .right-date[data-v-57324b87]{height:%?40?%;font-size:%?24?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#969799;line-height:%?40?%;text-align:right}.field-record .content .content-item .item-right .right-status[data-v-57324b87]{height:%?40?%;font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#ed2d42;line-height:%?40?%;margin-top:%?8?%;text-align:right}",""]),t.exports=e},"9c85":function(t,e,a){"use strict";var n=a("4ea4");a("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("2909")),o=(a("4a85"),n(a("761a")),{data:function(){return{tabList:[{name:"田间档案"},{name:"生产记录"}],current:0,content:"删除后记录将丢失!",showCancelButton:!0,DAshow:!1,SCshow:!1,curItem:{},list:[],copyList:[],status:"loadmore",page:1,total:0,sclist:[],sccopylist:[],scstatus:"loadmore",scpage:1,sctotal:0,baseUrl:this.API_BASE_URL,emptyData:"data"}},onReachBottom:function(){var t=this;if(0===this.current){if(console.log(111,this.total,this.scpage),this.page>=this.total/10)return;this.status="loading",this.page=++this.page,this.$http.get("/cooperation/farm/records/list/".concat(this.page,"/",10)).then((function(e){200===e.data.code&&(t.list=[].concat((0,i.default)(t.list),(0,i.default)(e.data.result.list)),t.page>=e.data.result.total?t.status="nomore":t.status="loading")}))}else{if(this.scpage>=this.sctotal/10)return;this.scstatus="loading",this.scpage=++this.scpage,this.$http.get("/cooperation/farm/product/record/list/".concat(this.scpage,"/",10)).then((function(e){200===e.data.code&&(t.sclist=[].concat((0,i.default)(t.sclist),(0,i.default)(e.data.result.list)),t.scpage>=t.sctotal?t.scstatus="nomore":t.scstatus="loading")}))}},created:function(){var t=this;uni.$on("updata_field_record",(function(e){t.tabChange(e)}))},onLoad:function(){this.tabChange(0)},methods:{tabChange:function(t){this.current=t,this.getData(t)},getData:function(t){var e=this;t?this.$http.get("/cooperation/farm/product/record/list/".concat(1,"/",10)).then((function(t){200===t.data.code&&(e.sclist=t.data.result.list,e.sctotal=t.data.result.total)})):this.$http.get("/cooperation/farm/records/list/".concat(1,"/",10)).then((function(t){200===t.data.code&&(e.list=t.data.result.list,e.total=t.data.result.total,console.log(e.list,"形势下属性属性"))}))},goPath:function(t){var e=Object.assign({},{p:t});localStorage.setItem("fieldRecord",JSON.stringify(e)),this.current?this.$Router.push({path:"/pages/fieldRecord/addSC/addSC",query:{isEdit:!0}}):this.$Router.push({path:"/pages/fieldRecord/addDA/addDA",query:{isEdit:!0}})},DAconfirm:function(){var t=this;this.$http.get("/cooperation/farm/records/delete/".concat(this.curItem.id,"/").concat(this.curItem.farmName)).then((function(e){200===e.data.code?t.$tip.success(e.data.result):t.$tip.error(e.data.result),t.getData(t.current)}))},SCconfirm:function(){var t=this;console.log(this.curItem),this.$http.get("/cooperation/product/records/delete/".concat(this.curItem.id)).then((function(e){200===e.data.code?t.$tip.success(e.data.result):t.$tip.error(e.data.result),t.getData(t.current)}))},add:function(){localStorage.removeItem("fieldRecord"),this.current?this.$Router.push({path:"/pages/fieldRecord/addSC/addSC",query:{title:"生产记录"}}):this.$Router.push({path:"/pages/fieldRecord/addDA/addDA",query:{title:"田间档案"}})}}});e.default=o},b48b:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uTabs:a("a943").default,uModal:a("3bde").default,uLoadmore:a("4179").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"field-record"},[a("div",{staticClass:"cx-sc-title"},[a("u-tabs",{attrs:{"active-color":"#09b76e",list:t.tabList,"is-scroll":!1,current:t.current},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabChange.apply(void 0,arguments)}}})],1),a("div",{staticClass:"add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add.apply(void 0,arguments)}}},[t._v("+新增")]),0===t.current?a("div",{staticClass:"content"},[a("u-modal",{attrs:{"show-cancel-button":t.showCancelButton,content:t.content},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.DAconfirm.apply(void 0,arguments)}},model:{value:t.DAshow,callback:function(e){t.DAshow=e},expression:"DAshow"}}),t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"content-item",on:{longpress:function(a){arguments[0]=a=t.$handleEvent(a),function(){t.DAshow=!0,t.curItem=e}.apply(void 0,arguments)},click:function(a){arguments[0]=a=t.$handleEvent(a),t.goPath(e)}}},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"left-title"},[t._v(t._s(e.productName))]),a("div",{staticClass:"left-desc"},[t._v(t._s(e.farmName)+" "+t._s(e.areaName)+"区")])]),a("div",{staticClass:"item-right"},[a("div",{staticClass:"right-date"},[t._v(t._s(e.createTime))]),a("div",{staticClass:"right-status"},[2==e.checktype?a("span",[t._v("未提交")]):t._e(),88==e.checktype?a("span",{staticStyle:{color:"#303133"}},[t._v("提交审核")]):t._e(),1==e.checktype?a("span",{staticStyle:{color:"#19BE6B"}},[t._v("审核通过")]):t._e()])])])})),t.list.length>9?a("u-loadmore",{attrs:{status:t.status}}):t._e(),0===t.list.length?a("empty-comp"):t._e()],2):a("div",{staticClass:"content"},[a("u-modal",{attrs:{"show-cancel-button":t.showCancelButton,content:t.content},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.SCconfirm.apply(void 0,arguments)}},model:{value:t.SCshow,callback:function(e){t.SCshow=e},expression:"SCshow"}}),t._l(t.sclist,(function(e,n){return a("div",{key:n,staticClass:"content-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goPath(e)},longpress:function(a){arguments[0]=a=t.$handleEvent(a),function(){t.SCshow=!0,t.curItem=e}.apply(void 0,arguments)}}},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"left-title"},[t._v(t._s(e.productName))]),a("div",{staticClass:"left-desc"},[t._v(t._s(e.farmName)+" "+t._s(e.areaName)+"区")])]),a("div",{staticClass:"item-right"},[a("div",{staticClass:"right-date"},[t._v(t._s(e.createTime))]),a("div",{staticClass:"right-status"},[2==e.status?a("span",[t._v("未提交")]):t._e(),88==e.status?a("span",{staticStyle:{color:"#303133"}},[t._v("提交审核")]):t._e(),1==e.status?a("span",{staticStyle:{color:"#19BE6B"}},[t._v("审核通过")]):t._e()])])])})),t.sclist.length>9?a("u-loadmore",{attrs:{status:t.scstatus}}):t._e(),0===t.sclist.length?a("empty-comp"):t._e()],2)])},o=[]},d1f1:function(t,e,a){"use strict";a.r(e);var n=a("9c85"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},d398:function(t,e,a){"use strict";a.r(e);var n=a("b48b"),i=a("d1f1");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("641e");var s,c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"57324b87",null,!1,n["a"],s);e["default"]=r.exports}}]);